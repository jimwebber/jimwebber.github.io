	<!doctype html>
	<!--[if !IE]>
	<html class="no-js non-ie" lang="en-US"> <![endif]-->
	<!--[if IE 7 ]>
	<html class="no-js ie7" lang="en-US"> <![endif]-->
	<!--[if IE 8 ]>
	<html class="no-js ie8" lang="en-US"> <![endif]-->
	<!--[if IE 9 ]>
	<html class="no-js ie9" lang="en-US"> <![endif]-->
	<!--[if gt IE 9]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
	<head>
<base href="/archive" />


		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		
		

		<title>Even if you think you can beat Waldo, you can&#8217;t beat Einstein &#8211; World Wide Webber</title>




<link rel='stylesheet' id='responsive-style-css'  href='/archive/contents/ui/theme/core/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-media-queries-css'  href='/archive/contents/ui/theme/core/css/responsive.css' type='text/css' media='all' />
<link rel='stylesheet' id='fontawesome-style-css'  href='/archive/contents/ui/theme/core/css/font-awesome.min.css' type='text/css' media='all' />
<script type='text/javascript' src='/archive/inc/js/jquery/jquery.js'></script>
<script type='text/javascript' src='/archive/inc/js/jquery/jquery-migrate.min.js'></script>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/responsive-modernizr.min.js'></script>








	<script>
		jQuery(document).ready(function(){
		var copyright_text = "";
		var cyberchimps_link = "";
		var siteurl = "/archive"; 
		if(copyright_text == "")
		{
			jQuery(".copyright #copyright_link").text(" "+"Default copyright text");
		}
		else{ 
			jQuery(".copyright #copyright_link").text(" "+copyright_text);
		}
		jQuery(".copyright #copyright_link").attr('href',siteurl);
		if(cyberchimps_link == 1)
		{
			jQuery(".powered").css("display","block");
		}
		else{
			jQuery(".powered").css("display","none");
		}
		});
	</script>
<!-- We need this for debugging -->
<!-- Responsive 3.11 -->
		<style type="text/css" id="wp-custom-css">
			1		</style>
		</head>

<body class="post-template-default single single-post postid-339 single-format-standard default-layout">

  	
<div id="container" class="hfeed">

	<div class="skip-container cf">
		<a class="skip-link screen-reader-text focusable" href="#content">&darr; Skip to Main Content</a>
	</div><!-- .skip-container -->
	<div id="header_section">
	<div id="header" role="banner">

		
		
		
		
				<div id="content-outer">
			<div id="logo">
				<span class="site-name"><a href="/archive/" title="World Wide Webber" rel="home">World Wide Webber</a></span>
				<span class="site-description">Jim Webber&#039;s Blog</span>
			</div><!-- end of #logo -->
		</div>
				
				<div class="main-nav"><ul class="menu"><li ><a href="/archive/">Home</a></li><li class="page_item page-item-95 current_page_parent"><a href="/archive/blog/">Blog</a></li><li class="page_item page-item-5 page_item_has_children"><a href="/archive/biography/">Bio</a><ul class='children'><li class="page_item page-item-10"><a href="/archive/biography/shortbio/">Short Bio</a></li></ul></li><li class="page_item page-item-630"><a href="/archive/books/">Books</a></li><li class="page_item page-item-15"><a href="/archive/contact/">Contact</a></li><li class="page_item page-item-13"><a href="/archive/professional/">Professional</a></li><li class="page_item page-item-12"><a href="/archive/publications/">Publications</a></li></ul></div>
		
		
	</div><!-- end of #header -->
	</div>


	  
	<div id="wrapper" class="clearfix">
<div id="content-outer">
<div id="content" class="grid col-620" role="main">

	
	
		
						<div id="post-339" class="post-339 post type-post status-publish format-standard hentry category-uncategorized">
				
				
	<h1 class="entry-title post-title responsive">Even if you think you can beat Waldo, you can&#8217;t beat Einstein</h1>

<div class="post-meta">
	<i class="fa fa-calendar" aria-hidden="true"></i><span class="meta-prep meta-prep-author posted">Posted on </span><a href="/archive/2005/07/even-if-you-think-you-can-beat-waldo-you-cant-beat-einstein/" title="Even if you think you can beat Waldo, you can&#8217;t beat Einstein" rel="bookmark"><time class="timestamp updated" datetime="2005-07-07T15:04:37+00:00">July 7, 2005</time></a><span class="byline"> by </span><span class="author vcard"><a class="url fn n" href="/archive/author/jim/" title="View all posts by jim"><span class="author-gravtar"></span>jim</a></span>		<span class='posted-in'>
Posted in <a href="/archive/category/uncategorized/">Uncategorized</a>		</span>

			<span class="comments-link">
		<span class="mdash">&mdash;</span>
			<a href="/archive/2005/07/even-if-you-think-you-can-beat-waldo-you-cant-beat-einstein/#respond">No Comments &darr;</a>		</span>
	</div><!-- end of .post-meta -->

				<div class="post-entry">
					<div xmlns="http://www.w3.org/1999/xhtml">
<p>In the latest issue of the <a href="http://www.zeroc.com/">ZeroC newsletter</a> Marc Laukien picks up the baton for binary protocol performance over XML/SOAP in an article rhetorically called &#8220;Why Smart People Defend Bad Standards.&#8221; The article follows up on <a href="http://jim.webber.name/2005/06/23/dbeede6f-4745-443a-bed3-3a556fcd3a36.aspx">my posting</a> on the excellent work being done at <a href="http://www.ict.csiro.au/">CSIRO</a> and <a href="http://www.cs.mq.edu.au/">Macquarie University</a> on evaluating performance (among other aspects) of enterprise middleware, for where there were subsequent <a href="http://jim.webber.name/2005/06/23/dbeede6f-4745-443a-bed3-3a556fcd3a36.aspx">follow-ups</a> from Michi Henning (also of ZeroC) rebutting those figures, <a href="http://markclittle.blogspot.com/">Mark Little</a> pointing out that you <a href="http://markclittle.blogspot.com/2005/06/soap-slow-or-fast.html">pick the right tool for the right job</a>, and <a href="http://savas.parastatidis.name/">Savas</a><a href="http://savas.parastatidis.name/2005/07/03/f52bed61-6dd0-4c08-8b54-22987a2f1468.aspx">pointing out</a> that in distributed computing <a href="http://research.sun.com/techrep/1994/smli_tr-94-29.pdf">Waldo</a> is king.</p>
<p>There are a couple of inaccuracies in the newsletter which I should point out before going any further, not Marc&#8217;s fault thought since he wasn&#8217;t to know that:</p>
<ol>
<li>I&#8217;m a bad person cheering for a smart Internetworking standard; and</li>
<li>I recently saw a <a href="http://www.cs.usyd.edu.au/~fekete/EII/EIIgreenfield.pdf">presentation</a> on the latest results from the SOAP performance at a <a href="http://www.cs.usyd.edu.au/~fekete/EII/">workshop</a> at Sydney University, presented by Paul Greenfield of <a href="http://www.ict.csiro.au/">CSIRO</a> and hadn&#8217;t merely read Alex&#8217;s <a href="http://mercury.it.swin.edu.au/ctg/AWSA05/Presentations/ng.ppt">PowerPoints</a>. I spent a great deal of time talking to Paul during that workshop about precisely this issue and getting my head round his initially counter-intuitive results.</li>
</ol>
<p>One important point to remember when considering the claims made by the <a href="http://www.ict.csiro.au/">CSIRO</a>/<a href="http://www.cs.mq.edu.au/">Macquarie University</a> researchers is that they have no commercial axe to grind and in no way stand to make any gains from publishing the facts about system performance save enhancing their academic reputations. Conversely commercial organisations have much to gain by having performant products and therefore will always strive to unequivocally demonstrate their product&#8217;s performance. You should also keep in mind that I suck at maths in any calculations that follow.</p>
<p>To kick things off, Marc puts forward figures for SOAP and binary protocol middleware where he states:</p>
<p class="quote">&#8220;Alex [Ng, of Macquarie] quotes 7ms for a simple SOAP message&#8221;</p>
<p>and</p>
<p class="quote">&#8220;Ice and other binary-protocol middleware, such as CORBA ORBs, are tens or hundreds of times faster, with latency figures in the range of 0.03ms to 0.3ms.&#8221;</p>
<p>Quite so, I think those figures are very plausible especially for system like ICE which the clever folks at <a href="http://www.zeroc.com/">ZeroC</a> have no doubt optimised very well. However, as I made clear in my <a href="http://jim.webber.name/2005/06/23/dbeede6f-4745-443a-bed3-3a556fcd3a36.aspx">original posting</a>, over large distances even the speed of light becomes an important limiting factor in performance. So let&#8217;s cast our comparison within the same framework that recent <a href="http://www.ict.csiro.au/">CSIRO</a>/<a href="http://www.cs.mq.edu.au/">Macquarie University</a> work used &#8211; Internet scale integration.</p>
<p><b>A Simple Experiment</b></p>
<p>The <a href="http://www.ict.csiro.au/">CSIRO</a>/<a href="http://www.cs.mq.edu.au/">Macquarie</a> work used a fast private network between Sydney and Canberra. The distance between these two cities is approximately 300km. Short by Australian standards but I suspect a fairly average end-to-end distance in much of the rest of the world. Now, the speed of light is approximately 300,000km/sec which means that information can travel from Sydney to Canberra in around 1ms, assuming the intervening network equipment causes no latencies (which is slightly inaccurate, but will suffice for this experiment). For roundtrip which enables true RPC this doubles to around 2ms (ok- this <a href="http://savas.parastatidis.name/2005/07/05/43722d3d-975e-4e4c-b01d-4ef9498a8fea.aspx">isn&#8217;t the canonical case for Web Services</a>, but just roll with it for now).</p>
<p>So before we even start we have a 2ms latency to contend with. Thank you very much Einstein.</p>
<p>Things are looking up in the binary protocol experiment since the additional latency is a meagre 0.03ms per node in the best case and a still, well, meagre 0.3ms per node in the worst case. This brings the total latency to somewhere between 2.06ms and 2.6ms (roundtrip plus latency at each end). Pretty respectable I think.</p>
<p>In the SOAP case, as one might expect things are not quite as optimal such is the penalty for using a general-purpose Internetworking protocol. We can assume that at best SOAP processing will incur an additional 7ms latency at each end of the link bringing the SOAP total to 16ms &#8211; around 14ms slower than the binary version.</p>
<p>So in a realistic Internet situation which both SOAP and (say) ICE are designed for the difference is about 14ms. That is, a good binary protocol implementation is about 8x faster than the .Net 1.1 SOAP stack which was the basis for the <a href="http://www.ict.csiro.au/">CSIRO</a>/<a href="http://www.cs.mq.edu.au/">Macquarie</a> work. Now 8x faster is an impressive figure and in some cases will be well worth sacrificing some degree of interoperability for. However 8x falls a little short  of the &#8220;tens or hundreds of times faster&#8221; that the latest ICE newsletter claims.</p>
<p>Now think for a minute that 300km is not actually that far. Darwin and Adelaide (both of which I am assured have Internet connectivity) are just over 3000km apart &#8211;  a factor of 10 times larger than the Sydney to Canberra distance. Again we&#8217;ll assume that the network gods are benevolent up to the point of general relativity which means that we have a latency of around 10ms one-way and so 20ms for a roundtrip. For the optimised binary case this means a total latency of somewhere between 20.06ms and 20.6ms. Still pretty respectable. For the SOAP case we have a total roundtrip time of 20ms plus the SOAP processing latency of two lots of 7ms which gives a total of 34ms. In this case the optimised binary version beats the SOAP version by 14ms again.</p>
<p><b>&#8220;Can you see what it is yet?&#8221;</b></p>
<p>Eventually the limiting factor for integration of distant systems is the speed of light and not the latency of processing individual messages. The latency difference between the two approaches will always be approximately 14ms but as network latency gets larger (over distance) the cost of processing the message payload for either binary or SOAP has significantly less impact on overall latency.</p>
<p><b>Rockin&#8217; in the Real World</b></p>
<p>But as all network gamers know real networks don&#8217;t approach the speed of light &#8211; not even over short distances &#8211; and lag is just as much your mortal enemy as frag. For example to ping a peer on my local wireless network the best latency (as measured by running batch of pings) is around 2ms but my average latency is 100ms over a negligible distance compared to the speed of light. In the average case on this network the binary protocol is a mere 14% faster than SOAP &#8211; certainly not tens of times faster.</p>
<p>Of course everyone knows that wireless sucks for latency and real gamers play on real <a href="http://4kings.esportsea.com/">gamerboy</a> LANs. I&#8217;m working in China at the moment and the Chinese love on-line gaming almost as much as they love smoking and gambling (lots) so of course the client on this engagement has a blisteringly quick Gigabit network for *ahem* work. Well at least during office hours it&#8217;s for work &#8211; usually. The ping on this network is on average below 1ms which means that once again binary trumps SOAP by a long margin :  approximately 1ms versus approximately 15ms &#8211; SOAP is 15 times slower on this network &#8211; the first measurement that got into the hitherto mythical &#8220;tens of times&#8221; faster. One and a half tens faster anyway.</p>
<p>However transfer protocols like SOAP and middleware like ICE are designed for Internet scale integration (though with ICE&#8217;s latency there is no reason to not use it in a LAN if you don&#8217;t have interoperability to worry about). Let&#8217;s see how SOAP and binary stack up with a real, but fast, Internet connection. Since I&#8217;m in China I don&#8217;t have access to any fast Internet connections so thanks to <a href="http://savas.parastatidis.name/">Savas</a> for pinging a few places on my behalf.</p>
<p><a href="http://savas.parastatidis.name/">Savas</a> is currently (<a href="http://jim.webber.name/2005/06/28/80613fb1-9b51-43a8-88dd-2098e3bfbab6.aspx">but not for much longer</a>) based at the <a href="http://www.cs.ncl.ac.uk/">School of Computing</a> at the <a href="http://www.ncl.ac.uk/">University of Newcastle upon Tyne</a> in the UK. Newcastle University is the central hub for the <a href="http://www.norman.net.uk/">NorMAN</a> network and is North Eastern England&#8217;s route onto <a href="http://www.ja.net/">JANET</a>, the super quick UK academic network, via a 2.5 Gbit/s link. From NorMAN Savas enjoys a 1GBit connection into his office which I miss and am supremely jealous of. While this is hardly a typical home broadband package it&#8217;s a good starting point for seeing how the latent the Internet can be, while factoring out concerns such as poor domestic ISPs.</p>
<p>In three separate and broadly representative pings, we observe the following latencies:</p>
<table id="table3" style="BORDER-COLLAPSE: collapse" width="45%" border="1">
<tbody>
<tr>
<td width="333" bgcolor="#E6E6FA">Route</td>
<td bgcolor="#E6E6FA">Best Ping Latency</td>
</tr>
<tr>
<td width="333">Newcastle University to Imperial College London</td>
<td>10ms</td>
</tr>
<tr>
<td width="333">Newcastle University to ForthNet.gr in Greece</td>
<td>70ms</td>
</tr>
<tr>
<td width="333">Newcastle University to Columbia University</td>
<td>78ms</td>
</tr>
</tbody>
</table>
<p>In terms of end-to-end latency for a roundtrip (assuming symmetry on the network) we get:</p>
<table id="table4" style="BORDER-COLLAPSE: collapse" width="45%" border="1">
<tbody>
<tr>
<td width="287" bgcolor="#E6E6FA">Route</td>
<td bgcolor="#E6E6FA">Average Case Binary Latency</td>
<td bgcolor="#E6E6FA">SOAP Latency</td>
<td bgcolor="#E6E6FA">SOAP Penalty</td>
</tr>
<tr>
<td width="287">Newcastle University to Imperial College London</td>
<td>20.66ms</td>
<td>34ms</td>
<td>64.57%</td>
</tr>
<tr>
<td width="287">Newcastle University to ForthNet.gr in Greece</td>
<td>140.66ms</td>
<td>154ms</td>
<td>9.48%</td>
</tr>
<tr>
<td width="287">Newcastle University to Columbia University</td>
<td>156.66ms</td>
<td>170ms</td>
<td>7.85%</td>
</tr>
</tbody>
</table>
<p>So when you are one hop away from an expensive national backbone network and a couple of hops (via that network) away from another well connected endpoint, SOAP is a little over one and one-half times slower than binary (tens? hundreds? Not really). Of course not many of us are afforded such luxuries and so our traffic has to traverse a few hops over better or worse networks. For example the over the path to ForthNet in Greece, the penalty is a little under 10% greater latency for SOAP. Over the geographically longer but somewhat faster transatlantic links to the USA the SOAP penalty is 8.5% versus binary.</p>
<p>Of course the typically larger messages which SOAP (even with <a href="http://www.w3.org/TR/2005/REC-soap12-mtom-20050125/">MTOM</a>) implies means that SOAP messages are more susceptible to packet loss, retransmission, and therefore larger latencies than binary. And this will tend to degrade SOAP performance over distance too by some factor depending on the reliability of the underlying network. Nonetheless I stand by <a href="http://jim.webber.name/2005/06/23/dbeede6f-4745-443a-bed3-3a556fcd3a36.aspx">my original posting</a> that while SOAP is slower than a good binary protocol it&#8217;s not by much. And it&#8217;s getting faster.</p>
</div>

					
									</div><!-- end of .post-entry -->

				<div class="navigation">
					<div class="previous">&#8249; <a href="/archive/2005/07/coming-real-soon-now/" rel="prev">Coming Real Soon Now&#8230;</a></div>
					<div class="next"><a href="/archive/2005/07/end-of-soap-peformance-thread/" rel="next">End of SOAP Peformance Thread</a> &#8250;</div>
				</div><!-- end of .navigation -->

				
	<div class="post-data">
			</div><!-- end of .post-data -->

<div class="post-edit"></div>
							</div><!-- end of #post-339 -->
			
						




		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2005/07/even-if-you-think-you-can-beat-waldo-you-cant-beat-einstein/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="/archive/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" /></p>
<p class="comment-form-email"><label for="email">E-mail</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='339' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="7ea37240c6" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="130"/></p>			</form>
			</div><!-- #respond -->
	

			
		
</div><!-- end of #content -->


	<div id="widgets" class="grid col-300 fit" role="complementary">
		
		<div id="text-7" class="widget-wrapper widget_text">			<div class="textwidget"><div>
<h4 align="center">Jim Webber's Books</h4>  

<p align="center">
<img alt="Graph Databases book cover" src="http://ecx.images-amazon.com/images/I/51JijeM8MAL.jpg" width="160" height="240" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

  
<p align="center">
<a href="http://www.amazon.com/gp/product/1449356265/ref=as_li_tf_il?ie=UTF8&camp=1634&creative=6738&creativeASIN=1449356265&linkCode=as2&tag=jimwebbesblog-21">Amazon (US)</a>  
<br/>
<a href="http://www.amazon.co.uk/gp/product/1449356265/ref=as_li_tf_il?ie=UTF8&camp=1634&creative=6738&creativeASIN=1449356265&linkCode=as2&tag=jimwebbesblog-21">Amazon (UK)</a>
</p>


<p align="center"><img alt="REST in Practice book cover" src="http://akamaicovers.oreilly.com/images/9780596805838/lrg.jpg" width="160" height="240" /></p>
<p align="center"><a href="http://www.amazon.com/gp/product/0596805829?ie=UTF8&amp;tag=jimwebbesblog-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=0596805829">Amazon (US)</a>
<br/>
<a href="http://www.amazon.co.uk/gp/product/0596805829?ie=UTF8&amp;tag=jimwebbesblog-21&amp;linkCode=xm2&amp;camp=1634&amp;creativeASIN=0596805829">Amazon (UK)</a></p>

<p align="center"><img alt="Developing Enterprise Web Services book cover" src="https://images-na.ssl-images-amazon.com/images/I/51ojvewjoHL._SX387_BO1,204,203,200_.jpg" width="160" height="240" /></p>
<p align="center"><a href="http://www.amazon.com/gp/product/B005MZDYRE?ie=UTF8&amp;tag=jimwebbesblog-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=B005MZDYRE">Amazon (US)</a>
<br/>
<a href="http://www.amazon.co.uk/gp/product/0131401602?ie=UTF8&amp;tag=jimwebbesblog-21&amp;linkCode=xm2&amp;camp=1634&amp;creativeASIN=0131401602">Amazon (UK)</a></p>
</div></div>
		</div>
			</div><!-- end of #widgets -->
</div>
</div><!-- end of #wrapper -->

	 
</div><!-- end of #container -->

<div id="footer" class="clearfix" role="contentinfo">
	
	<div id="footer-wrapper">
		
		 <!--   main-->
		
		<div id="content-outer">			
				</div>
		<div id="content-outer">
		<div class="grid col-940">

			<div class="grid col-540">
							</div><!-- end of col-540 -->

			<div class="grid col-380 fit">
				<ul class="social-icons"><li class="twitter-icon"><a href="http://twitter.com/jimwebber"><img src="/archive/contents/ui/theme/core/icons/twitter-icon.png" width="24" height="24" alt="Twitter"></a></li></ul><!-- .social-icons -->			</div><!-- end of col-380 fit -->

		</div><!-- end of col-940 -->
		
		<div class="grid col-300 copyright">
			&copy; 2018<a id="copyright_link" href="/archive/" title="World Wide Webber">
				World Wide Webber			</a>
		</div><!-- end of .copyright -->

		<div class="grid col-300 scroll-top"><!--<a href="#scroll-top" title="scroll to top">&uarr;</a>
		<div id="scroll-to-top"><span class="glyphicon glyphicon-chevron-up"></span></div>--></div>

		<div class="grid col-300 fit powered">
			<a href="http://cyberchimps.com/responsive-theme/" title="Responsive Theme" rel="noindex, nofollow">Responsive Theme</a>
			powered by <a href="http://wordpress.org/" title="WordPress">
				WordPress</a>
		</div><!-- end .powered -->
	</div>
		
	</div><!-- end #footer-wrapper -->

	</div><!-- end #footer -->
<div id="scroll" title="Scroll to Top" style="display: block;">Top<span></span></div>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/responsive-scripts.min.js'></script>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/jquery.placeholder.min.js'></script>
<script async="async" type='text/javascript' src='/archive/contents/lib/akismet/_inc/form.js'></script>
</body>
</html>
