	<!doctype html>
	<!--[if !IE]>
	<html class="no-js non-ie" lang="en-US"> <![endif]-->
	<!--[if IE 7 ]>
	<html class="no-js ie7" lang="en-US"> <![endif]-->
	<!--[if IE 8 ]>
	<html class="no-js ie8" lang="en-US"> <![endif]-->
	<!--[if IE 9 ]>
	<html class="no-js ie9" lang="en-US"> <![endif]-->
	<!--[if gt IE 9]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
	<head>
<base href="/archive" />


		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		
		

		<title>Getting Started with Neo4j 2.0 &#8211; World Wide Webber</title>




<link rel='stylesheet' id='responsive-style-css'  href='/archive/contents/ui/theme/core/css/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-media-queries-css'  href='/archive/contents/ui/theme/core/css/responsive.css' type='text/css' media='all' />
<link rel='stylesheet' id='fontawesome-style-css'  href='/archive/contents/ui/theme/core/css/font-awesome.min.css' type='text/css' media='all' />
<script type='text/javascript' src='/archive/inc/js/jquery/jquery.js'></script>
<script type='text/javascript' src='/archive/inc/js/jquery/jquery-migrate.min.js'></script>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/responsive-modernizr.min.js'></script>








	<script>
		jQuery(document).ready(function(){
		var copyright_text = "";
		var cyberchimps_link = "";
		var siteurl = "/archive"; 
		if(copyright_text == "")
		{
			jQuery(".copyright #copyright_link").text(" "+"Default copyright text");
		}
		else{ 
			jQuery(".copyright #copyright_link").text(" "+copyright_text);
		}
		jQuery(".copyright #copyright_link").attr('href',siteurl);
		if(cyberchimps_link == 1)
		{
			jQuery(".powered").css("display","block");
		}
		else{
			jQuery(".powered").css("display","none");
		}
		});
	</script>
<!-- We need this for debugging -->
<!-- Responsive 3.11 -->
		<style type="text/css" id="wp-custom-css">
			1		</style>
		</head>

<body class="post-template-default single single-post postid-745 single-format-standard default-layout">

  	
<div id="container" class="hfeed">

	<div class="skip-container cf">
		<a class="skip-link screen-reader-text focusable" href="#content">&darr; Skip to Main Content</a>
	</div><!-- .skip-container -->
	<div id="header_section">
	<div id="header" role="banner">

		
		
		
		
				<div id="content-outer">
			<div id="logo">
				<span class="site-name"><a href="/archive/" title="World Wide Webber" rel="home">World Wide Webber</a></span>
				<span class="site-description">Jim Webber&#039;s Blog</span>
			</div><!-- end of #logo -->
		</div>
				
				<div class="main-nav"><ul class="menu"><li ><a href="/archive/">Home</a></li><li class="page_item page-item-95 current_page_parent"><a href="/archive/blog/">Blog</a></li><li class="page_item page-item-5 page_item_has_children"><a href="/archive/biography/">Bio</a><ul class='children'><li class="page_item page-item-10"><a href="/archive/biography/shortbio/">Short Bio</a></li></ul></li><li class="page_item page-item-630"><a href="/archive/books/">Books</a></li><li class="page_item page-item-15"><a href="/archive/contact/">Contact</a></li><li class="page_item page-item-13"><a href="/archive/professional/">Professional</a></li><li class="page_item page-item-12"><a href="/archive/publications/">Publications</a></li></ul></div>
		
		
	</div><!-- end of #header -->
	</div>


	  
	<div id="wrapper" class="clearfix">
<div id="content-outer">
<div id="content" class="grid col-620" role="main">

	
	
		
						<div id="post-745" class="post-745 post type-post status-publish format-standard hentry category-books category-neo4j category-nosql category-programming">
				
				
	<h1 class="entry-title post-title responsive">Getting Started with Neo4j 2.0</h1>

<div class="post-meta">
	<i class="fa fa-calendar" aria-hidden="true"></i><span class="meta-prep meta-prep-author posted">Posted on </span><a href="/archive/2014/01/starting-graph-databases-with-neo4j-2-0/" title="Getting Started with Neo4j 2.0" rel="bookmark"><time class="timestamp updated" datetime="2014-01-06T10:10:14+00:00">January 6, 2014</time></a><span class="byline"> by </span><span class="author vcard"><a class="url fn n" href="/archive/author/jim/" title="View all posts by jim"><span class="author-gravtar"></span>jim</a></span>		<span class='posted-in'>
Posted in <a href="/archive/category/books/">Books</a>, <a href="/archive/category/neo4j/">neo4j</a>, <a href="/archive/category/nosql/">NOSQL</a>, <a href="/archive/category/programming/">Programming</a>		</span>

			<span class="comments-link">
		<span class="mdash">&mdash;</span>
			<a href="/archive/2014/01/starting-graph-databases-with-neo4j-2-0/#comments">3 Comments &darr;</a>		</span>
	</div><!-- end of .post-meta -->

				<div class="post-entry">
					<p><span style="font-size: 14px; line-height: 1.5em;">With the <a href="http://blog.neo4j.org/2013/12/neo4j-20-ga-graphs-for-everyone.html">recent release of Neo4j 2.0</a> and it’s a great time to get familiar with graphs and graph databases. </span><span style="line-height: 1.5em;">Neo4j is quite different from relational databases, and it’s also quite different from most of the other NoSQL databases. The reason for its differences is that it addresses more complex challenges with interconnected (</span><i style="line-height: 1.5em;">joined-up</i><span style="line-height: 1.5em;">) data.  This makes Neo4j ideal for high fidelity modelling and high-performance querying of rich, real-world domains.</span></p>
<p><span style="line-height: 1.5em;">In this article we’ll work through some retail recommendations problems with Neo4j and see how we can use graphs to store and query complex interconnected data for fun and profit.</span></p>
<h2>What’s Neo4j?</h2>
<p>Aside from being strangely named software, Neo4j is an enterprise-grade, open source, ACID transactional, graph database. First deployed in 2003, Neo4j is by far the leader in the graph database world with a vibrant community, active development, and huge numbers of successful commercial and open source deployments.</p>
<p>As a graph database, data model is radically different from relational databases, and although it is considered to be part of the NoSQL space, its data model is also radically different from denormalised <a href="http://martinfowler.com/bliki/AggregateOrientedDatabase.html">aggregate stores</a>. In Neo4j, data is stored in <i>nodes</i> that hold key-value pairs. In turn, those nodes are linked through <i>relationships. </i>There can be many relationships between nodes, and each of them is named and directed (always with a start and end node). Although these are simple tools to understand, they can be used to create very expressive data models where the semantic glue between entities (nodes) is a  first-class citizen like the entities themselves. This model is known as a <i>property graph</i> and a simple example is shown in Figure 1.</p>
<p><img class="alignnone size-full wp-image-746" alt="1" src="http://jimwebber.org/contents/data/2013/12/1.png" width="865" height="165" srcset="/archive/contents/data/2013/12/1.png 865w, /archive/contents/data/2013/12/1-300x57.png 300w" sizes="(max-width: 865px) 100vw, 865px" /></p>
<p>Figure 1 The Property Graph Data Model</p>
<p>The property graph shown in Figure 1 depicts a small but typical subgraph where nodes (representing things) are connected by relationships that set the semantic context for those things. In this case we can see that Alice loves Bob, and that Bob loves Alice as well as cookies. Equally property graphs could model unrequited love where Alice loves Bob, but there is no reciprocal relationship (how sad!). At runtime however relationships can be traversed in either direction so we can equally ask questions like “Who does Alice love?” as well as “Who loves Alice?” with no computational penalty.</p>
<p>However, our modelling tools don’t stop here. Although the property graph model has been stable for over a decade, the Neo4j team continues to innovate in the graph space. In particular, Neo4j 2.0 has added a new twist to the classic property graph model in the form of <i>labels</i>.</p>
<p>Labels allow the modeller to “tag” nodes with names, allowing us to identify similar kinds of nodes like “customer” or “product” to the database. In turn queries can take advantage of that extra data to make them clearer (and faster too). Labels also allow us to specify structural constraints and indexing (for performance) on the graph in a way that is sympathetic rather than external to the domain..</p>
<p>An example with labelled nodes is shown in Figure 2 where we can clearly see that Alice and Bob are the only <i>people</i> who love each other, and that Bob’s other love – cookies – isn’t an interloper but just a <i>product</i> for a tasty teatime snack.</p>
<p><img class="alignnone size-full wp-image-747" alt="2" src="http://jimwebber.org/contents/data/2013/12/2.png" width="865" height="176" srcset="/archive/contents/data/2013/12/2.png 865w, /archive/contents/data/2013/12/2-300x61.png 300w" sizes="(max-width: 865px) 100vw, 865px" /></p>
<p><span style="line-height: 1.5em;">Figure 2 The Labelled Property Graph Data Model supports taxonomies of nodes</span></p>
<p>From even these simple examples, it’s clear that the property graph model <i>whiteboard </i>friendly, in fact typically <i>what you draw is what you store</i>. However the model also supports efficient queries without having to reduce the expressivity of the domain (e.g. through denormalisation) even when the domain itself is messy like the real world.  To demonstrate that, let’s start to work directly with Neo4j.</p>
<h2>Downloading Neo4j 2.0</h2>
<p>The first thing to do is download and install the database, the latest stable version is the newly minted Neo4j 2.0. A comprehensive guide for downloading, installing and running Neo4j on Linux, Mac, and Windows is available at: <a href="http://www.neo4j.org/download">http://www.neo4j.org/download</a> and the only prerequisite is <a href="http://java.com/en/download/index.jsp">Java 7</a>.</p>
<p>Once we have the database installed, it&#8217;s a simple command line or double-click to get it running and then we’re all set to pour data into it and get insight through graph queries. So let&#8217;s start by introducing the domain.</p>
<h2>Using Neo4j for Retail Recommendations</h2>
<p><span style="line-height: 1.5em;">While property graphs are a very general-purpose data model, to kick-start our learning with Neo4j 2.0 we’ll use retail as our example domain since it’s simple to understand and a very popular use-case (especially when it comes to product recommendations).</span></p>
<p><span style="line-height: 1.5em;">Firstly let’s get the basics out of the way: how do we model an individual customer and the product purchases they make over time? This scenario very illustrative of graph modelling since it covers three discrete dimensions: time, customers, and products, which can be seamlessly integrated when modelled as a graph and later any or all of the dimensions can be intertwined when querying.</span></p>
<p><img class="alignnone size-full wp-image-748" alt="3" src="http://jimwebber.org/contents/data/2013/12/3.png" width="865" height="651" srcset="/archive/contents/data/2013/12/3.png 865w, /archive/contents/data/2013/12/3-300x225.png 300w" sizes="(max-width: 865px) 100vw, 865px" /></p>
<p><span style="line-height: 1.5em;">Figure 3 Purchase history for a customer</span></p>
<p>The diagram in Figure 3 shows how we can use a simple linked list of shopping baskets connected by <i>NEXT</i> relationships to create a purchase history for the customer. In that graph we see that the customer has visited three times, saved their first purchase for later (the <i>SAVED</i> relationship between customer and basket nodes) and ultimately bought one basket (indicated by the <i>BOUGHT</i> relationship between customer and basket node) and is currently assembling a basket, shown by the <i>CURRENT</i> relationship that points to an active basket at the head of the linked list. It’s important to understand this isn’t a schema or ER-diagram but represents actual data for a single customer. A real graph of many such customers will be huge (far too big to draw in this article) but exhibit the same kind of structure.</p>
<p>In graph form, it’s easy to figure out the customer’s behaviour: they became a potential new customer but failed to commit to buying toothpaste and came back one day later and bought toothpaste, bread, and butter. Finally the customer settled on buying bread and butter in next purchase – which is a repeated pattern in their purchase history we could ultimately use to serve them better.</p>
<p>Now we understand a simple labelled property graph model, it’s time to push it into Neo4j. The primary way of managing data in Neo4j 2.0 is the <a href="http://www.neo4j.org/learn/cypher">Cypher query language</a>, which is used query, alter, label, and index the graph. While the programmatic APIs from Neo4j 1.x remain (and are used to express arbitrary graph algorithms, or enable close-to-the-metal programming) Cypher is often the best choice and is definitely the right place for us to start learning. The first thing we need to do is load our customer graph into Neo4j via Cypher as in Listing 1.</p>
<pre>CREATE (alice:Customer {name: 'Alice'})
CREATE (b1:Basket {id: 'a332deb', date: 20130928})
CREATE (b1)-[:NEXT]-&gt;(b2:Basket {id: 'a332deb', date: 20130929})
CREATE (b2)-[:NEXT]-&gt; (b3:Basket {id: 'ffda309', date: 20131010})
CREATE (alice)-[:SAVED]-&gt;(b1)
CREATE (alice)-[:BOUGHT]-&gt;(b2)
CREATE (alice)-[:CURRENT]-&gt;(b3)
CREATE (toothpaste:Product {name: 'Toothpaste'})
CREATE (toothpaste)-[:IN]-&gt;(b1)
CREATE (toothpaste)-[:IN]-&gt;(b2)
CREATE (bread:Product {name: 'Bread'})
CREATE (bread)-[:IN]-&gt;(b2)
CREATE (butter:Product {name: 'Butter'})
CREATE (butter)-[:IN]-&gt;(b2)
CREATE (bread)-[:IN]-&gt;(b3)
CREATE (butter)-[:IN]-&gt;(b3)</pre>
<p>Listing 1 Building a purchase history for a customer</p>
<p>Usually it’s an application that generates the kind of Cypher statements we see in Listing 1, but writing it out longhand works pretty well too for learning purposes. Cypher’s philosophy is to draw ASCII-art pictures of the graph for both describing structures for storage and looking for patterns. In Cypher, nodes are represented as <i>(node)</i> while relationships take the form of arrows like<br />
<i>–[:LOVES]-&gt;</i> while properties on either nodes or relationships use a JSON-like map syntax such as <i>{ name: ‘Alice’, age : 33}</i>.</p>
<p>To create a customer, we use the syntax <i>CREATE (alice:Customer {name: &#8216;Alice&#8217;})</i> which creates a node with the label <i>Customer</i> and populates that node with a property with key <i>name</i> and value <i>Alice</i>. It then introduces an identifier for that node <i>alice</i> into the scope of the current query. The identifier <i>alice</i> is then used to build out connections to other nodes created in the same way. For instance <i>CREATE (alice)-[:BOUGHT]-&gt;(b2)</i> creates an outgoing <i>BOUGHT</i> relationship from the node representing Alice to the basket node identified as <i>b2</i>. Though each statement is itself rather simple, in the aggregate we can create very sophisticated and large graph structures with these primitives.</p>
<p>Now that we have a graph of customers, and the past products they’ve bought we can think about recommendations to influence their future buying behaviour. By far the simplest recommendation we can make is to show popular products across the store. This is trivial in Cypher as we can see in Listing 2.</p>
<pre>MATCH (customer:Customer)-[:BOUGHT]-&gt;(:Basket)&lt;-[:IN]-(product:Product)
RETURN product, count(product) ORDER BY count(product) DESC LIMIT 5</pre>
<p>Listing 2 Query for the 5 most popular products</p>
<p>The Cypher query in Listing 2 showcases much about Cypher. Firstly the <i>MATCH</i> clause shows how ASCII-art is once again used to declare the graph structure that we’re looking for. In this case it can be read as “customers who bought a basket that had a product in it” except since baskets aren’t particularly important for this query we’ve elided them using the anonymous node <i>()</i>. Then we <i>RETURN</i> the data that matched the pattern, and operate on it with some (familiar-looking) aggregate functions. That is, we return the node representing the product(s) and the count of how many product nodes matched, then order by the number of nodes that matched in a descending fashion, limiting to the top 5 which gives us the most popular products in the purchasing data as shown in Listing 3.</p>
<pre><span style="line-height: 1.5em;">+--------------------------------------------------------------+
</span>| product                                     | count(product) |
+--------------------------------------------------------------+
| Node[69]{sku:11122398,desc:"whole milk"}    | 5              |
| Node[68]{sku:75620009,desc:"unsliced loaf"} | 4              |
| Node[70]{sku:32986438,desc:"tagliatelle"}   | 3              |
| Node[66]{sku:95645311,desc:"butter"}        | 3              |
| Node[71]{sku:32405923,desc:"tea bags"}      | 2              |
+--------------------------------------------------------------+</pre>
<p>Listing 3 Results of the query for the 5 most popular products</p>
<p>There are a couple of downsides to the query in Listing 2 though. Firstly it’s not really contextualized by the customer, but by all customers and so isn’t very accurate for any given individual, though it might be very useful for supply chain management.  Secondly since it matches the purchasing behaviour of all customers, it’s not likely to be a sub-millisecond query – the kind of thing that we’d put between a Web request and response.</p>
<p>We can do better though, and without much additional work. The next simplest recommendation we can make is simply to show historically popular purchases that the customer has made themselves as we see in Listing 4.</p>
<pre>MATCH (customer:Customer {name: 'Alice'})-[:BOUGHT]-&gt;(:Basket)&lt;-[:IN]-(product:Product)
RETURN product, count(product) ORDER BY count(product) DESC LIMIT 5</pre>
<p>Listing 4 A query to retrieve a customer’s favourite products</p>
<p>The only difference in Listing 4 compared to Listing 2 is the inclusion of a constraint on the customer node that it must contain a key <i>name</i> and a value <i>Alice</i>. This is actually a far better query from the customer’s point of view but it’s also faster too since the database has to do less work since it rules out most of the graph (all the parts that Alice isn’t involved in).</p>
<p>Of course in an age of social selling, it’d be even better to show the customer popular products in their social network rather than just their own purchases since this has a strongly influences buying behaviour. As you’d expect adding a social dimension to a Neo4j graph is easy. To that end, in Listing 5 we add the social connections, query those connections in Listing 6 and get the substantially more useful results in Listing 7.</p>
<pre><span style="line-height: 1.5em;">CREATE (alice)-[:FRIEND]-&gt;(bob)
</span>CREATE (alice)-[:FRIEND]-&gt;(dora)
CREATE (bob)-[:FRIEND]-&gt;(alice)
CREATE (bob)-[:FRIEND]-&gt;(dora)
CREATE (charlie)-[:FRIEND]-&gt;(dora)
CREATE (dora)-[:FRIEND]-&gt;(alice)
CREATE (dora)-[:FRIEND]-&gt;(bob)
CREATE (dora)-[:FRIEND]-&gt;(charlie)</pre>
<p>Listing 5 Adding friends in a social network for customers</p>
<pre>MATCH (customer:Customer {name: 'Alice'})-[:FRIEND*1..2]-&gt;(friend:Customer)
WHERE customer &lt;&gt; friend
WITH DISTINCT friend
MATCH (friend)-[:BOUGHT]-&gt;(:Basket)&lt;-[:IN]-(product:Product)
RETURN product, count(product) ORDER BY count(product) DESC LIMIT 5</pre>
<p>Listing 6 Cypher query for popular products bought by friends and friends of friends in a social network</p>
<p>To retrieve the purchased products of both direct friends <i>and</i> friends-of-friends we use the Cypher <i>WITH</i> clause to divide the query in Listing 6 into two logical parts, piping results from the first part into the second.</p>
<p>In the first part of the query, we see the family syntax where we find the current customer (Alice) and traverse the graph matching for either Alice’s direct friends or their friends (her friend-of-friends).</p>
<p>This is a straightforward query since Neo4j supports a flexible path length notation that we see connecting a customer to friends at either depth one or depth 2 like so: <i>-[:FRIEND*1..2]-&gt;</i>. In this case we get all friends (depth one) and friend-of-friend (at depth two) but the notation can be parameterised for any maximum and minimum depth.</p>
<p>However the overall structure is not sufficient to arrive at a correct result in this case. In matching we must care not to include Alice herself in the results, which is possible because Alice is a friend of Bob who is a friend of Alice making her a friend-of-friend to herself! It is the second line of the <i>WHERE</i> clause which enforces this by ensuring there is only a match when the customer and candidate friend are not the same node.</p>
<p>Furthermore, we don’t want to get duplicate friends-of-friends that are also direct friends (or vice-versa since the outcome is the same). This can happen because Bob is both a direct friend and a friend-of-friend through Dora. Using the <em>DISTINCT</em> keyword ensures that we don’t get duplicate results from equivalent pattern matches.</p>
<p>Once we have the friends and friends-of-friends of the customer, the <i>WITH</i> clause allows us to pipe the results from the first part of the query into the second. In the second half of the query, we’re back in familiar territory, matching against customers (the friends and friends-of-friends) who bought products and ranking them by sales (the number of bought baskets each product appeared in). Running the query over our sample data set reveals that whole milk is the most popular product amongst this social group as we see in Listing 7. Since Alice hasn’t bought any whole milk, she should probably add some to her basket in case any of her friends visit.</p>
<pre>+---------------------------------------------------------------+
| product                                      | count(product) |
+---------------------------------------------------------------+
| Node[155]{sku:11122398,desc:"whole milk"}    | 5              |
| Node[154]{sku:75620009,desc:"unsliced loaf"} | 4              |
| Node[156]{sku:32986438,desc:"tagliatelle"}   | 3              |
| Node[157]{sku:32405923,desc:"tea bags"}      | 2              |
| Node[152]{sku:95645311,desc:"butter"}        | 1              |
+---------------------------------------------------------------+</pre>
<p>Listing 7 Popular products bought by friends and friends of friends</p>
<p>From here it’s easy to see how we can add other dimensions to the query. We can use spatial information about the customer’s address, their social demographic, the store’s supply chain and stock situation and many other things. This seamless blending of multidimensional data is they key strength of modelling with property graphs and the key strength of Neo4j is that it makes working with property graphs pleasant (because of Cypher), fast (because of index-free adjacency), and reliable (because of ACID transactions and HA clustering).</p>
<h2>Declarative Indexing</h2>
<p>If you’ve used Cypher in Neo4j 1.x, you’ll have noticed a that the <i>START</i> clause has been missing from the queries in this article. It’s still there if you need it (e.g. when you need to access legacy indexes for integration with other data stores), but in Neo4j 2.0 finding starting nodes for a query is handled declaratively by the database rather than calling imperatively calling out to an index.</p>
<p>This means we can declare indexes on certain labels and have Neo4j use those indexes, where appropriate, to speed up queries. Selecting a starting node is a typical example, but the Neo4j query planner is free to use indexes anywhere that a scan might otherwise be used.</p>
<p>To declare an index we simply use a little Cypher, as we can see in Listing 8.</p>
<pre>CREATE INDEX ON :Customer(name)</pre>
<p>Listing 8 Creating an index of Customers based on their names</p>
<p>The index creation clause is simple to understand, it needs a label like <em>:Customer</em> and a property associated with that label to index on like <em>name</em>. Issuing this command causes Neo4j to start to build out an index of named customers in the background that will become available to the query planner once it completes. The index will also be automatically managed in future as nodes (and relationships) are added, removed, and changed. Without indexes queries will still work (of course!), but with the indexes discrete access to indexed nodes (like starting nodes) will be substantially quicker. It is also less code to write.</p>
<p>Ultimately this means that operations folks don’t need to be able to code to control the performance of their Neo4j instances at runtime. Instead all they need is a basic grasp of Cypher, and they are all set.</p>
<h2>Constraints</h2>
<p>Now that we have labels in Neo4j 2.0, we have an interesting opportunity to begin to apply pragmatic governance to the data model. While Neo4j is traditionally at the “schema-less” end of the database spectrum, the addition of constraints can move us towards the valuable centre ground of “less schema.” In essence this means that we can have light-schema where we need to, and allow organic growth of the graph where we don’t.</p>
<p>In Neo4j 2.0 we see the first such constraint in the form of Uniqueness. For example to create or drop a uniqueness constraints on a product’s SKU (Stock-Keeping Unit) we can use the Cypher in Listing 9.</p>
<pre><span style="line-height: 1.5em;">CREATE CONSTRAINT ON (p:Product) ASSERT p.sku IS UNIQUE
</span>DROP CONSTRAINT ON (p:Product) ASSERT p.sku IS UNIQUE</pre>
<p>Listing 9 Creating and dropping uniqueness constraints</p>
<p>Future versions of Neo4j 2.x will build more useful constraints. For example, we could imagine implementing property constraints such that any node labelled <i>Person</i> must have a <i>first_name</i> and <i>last_name</i> property. Or we could go a step further and introduce structural constraints whereby any node labelled, say, <i>Householder</i> must be connected via a <i>LIVES_AT</i> relationship to another node labelled <i>Address</i>.</p>
<p>Importantly, this is all accessible via the Cypher query language (as well as the programmatic APIs) making it available to operators and developers.</p>
<h2>Summary</h2>
<p>In this article we’ve seen how Neo4j 2.0 and the new version of the Cypher query language can be used to store and query a range of retail data from product catalogue to customer purchases. We also saw how straightforward it was to quickly gain insight from that data, despite the domain being highly and intricately connected.</p>
<p>Neo4j makes it easy to use graphs to analyse data in near real-time for online systems and is widely deployed in large enterprises and start-ups alike. If all this has piqued your interest, Neo4j 2.0 is ready to <a href="http://neo4j.org/download">download</a>, and with the recent release of the O’Reilly book “Graph Databases&#8221; by <a href="http://twitter.com/iansrobinson">Ian Robinson</a>, <a href="http://twitter.com/jimwebber">me</a>, and <a href="http://twitter.com/emileifrem">Emil Eifrem</a> (a full free eBook version is available at <a href="http://graphdatabases.com">http://graphdatabases.com</a>) this is a great time to get acquainted with Neo4j, Cypher and graphs.</p>
<p>(with thanks to Mark Washeim for spotting a copy-n-paste error in the data set)</p>

					
									</div><!-- end of .post-entry -->

				<div class="navigation">
					<div class="previous">&#8249; <a href="/archive/2013/02/my-new-book-on-graph-databases/" rel="prev">My New Book on Graph Databases</a></div>
					<div class="next"><a href="/archive/2015/05/new-releases-of-rest-in-practice-and-graph-databases/" rel="next">New Releases of REST in Practice and Graph Databases</a> &#8250;</div>
				</div><!-- end of .navigation -->

				
	<div class="post-data">
			</div><!-- end of .post-data -->

<div class="post-edit"></div>
							</div><!-- end of #post-745 -->
			
						
	<h6 id="comments">
		3 comments on &ldquo;<span>Getting Started with Neo4j 2.0</span>&rdquo;	</h6>

	
	<ol class="commentlist">
				<li class="comment even thread-even depth-1" id="comment-2242">
				<div id="div-comment-2242" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Maarten</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/archive/2014/01/starting-graph-databases-with-neo4j-2-0/#comment-2242">
			February 6, 2014 at 10:40 pm</a>		</div>

		<p>You say that &#8216;Future versions of Neo4j 2.x will build more useful constraints. For example, we could imagine &#8230;&#8217;. Can you give more details about the actual planned constraints?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/archive/2014/01/starting-graph-databases-with-neo4j-2-0/' onclick='return addComment.moveForm( "div-comment-2242", "2242", "respond", "745" )' aria-label='Reply to Maarten'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-jim bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-2245">
				<div id="div-comment-2245" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">jim</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/archive/2014/01/starting-graph-databases-with-neo4j-2-0/#comment-2245">
			February 7, 2014 at 10:00 pm</a>		</div>

		<p>@Maarten</p>
<p>I can give my view of what would be useful. There&#8217;s probably some overlap with that and what will ship with Neo4j in the 2.x series. Off the top of my head:</p>
<p>1. Property exists constraints. E.g. for a label :Person, there must be first_name and last_name properties present on that node.<br />
2. Structural constraints. E.g. if a node has a label :Car then it must be connected via an incoming :DRIVES relationship to at least one other node with label :Person.</p>
<p>Hope that&#8217;s useful.</p>
<p>Jim</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/archive/2014/01/starting-graph-databases-with-neo4j-2-0/' onclick='return addComment.moveForm( "div-comment-2245", "2245", "respond", "745" )' aria-label='Reply to jim'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2489">
				<div id="div-comment-2489" class="comment-body">
				<div class="comment-author vcard">
						<cite class="fn">Ramesh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/archive/2014/01/starting-graph-databases-with-neo4j-2-0/#comment-2489">
			March 10, 2014 at 5:02 am</a>		</div>

		<p>This use case is well explained and its good for beginner to understand development in Neo4j..!<br />
Thanks for posting this kind of use case.</p>
<p>&#8211;Ramesh</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/archive/2014/01/starting-graph-databases-with-neo4j-2-0/' onclick='return addComment.moveForm( "div-comment-2489", "2489", "respond", "745" )' aria-label='Reply to Ramesh'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
	</ol>

	



		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2014/01/starting-graph-databases-with-neo4j-2-0/#respond" style="display:none;">Cancel reply</a></small></h3>			<form action="/archive/wp-comments-post.php" method="post" id="commentform" class="comment-form">
				<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" /></p>
<p class="comment-form-email"><label for="email">E-mail</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='745' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="2ca54b4903" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="154"/></p>			</form>
			</div><!-- #respond -->
	

			
		
</div><!-- end of #content -->


	<div id="widgets" class="grid col-300 fit" role="complementary">
		
		<div id="text-7" class="widget-wrapper widget_text">			<div class="textwidget"><div>
<h4 align="center">Jim Webber's Books</h4>  

<p align="center">
<img alt="Graph Databases book cover" src="http://ecx.images-amazon.com/images/I/51JijeM8MAL.jpg" width="160" height="240" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

  
<p align="center">
<a href="http://www.amazon.com/gp/product/1449356265/ref=as_li_tf_il?ie=UTF8&camp=1634&creative=6738&creativeASIN=1449356265&linkCode=as2&tag=jimwebbesblog-21">Amazon (US)</a>  
<br/>
<a href="http://www.amazon.co.uk/gp/product/1449356265/ref=as_li_tf_il?ie=UTF8&camp=1634&creative=6738&creativeASIN=1449356265&linkCode=as2&tag=jimwebbesblog-21">Amazon (UK)</a>
</p>


<p align="center"><img alt="REST in Practice book cover" src="http://akamaicovers.oreilly.com/images/9780596805838/lrg.jpg" width="160" height="240" /></p>
<p align="center"><a href="http://www.amazon.com/gp/product/0596805829?ie=UTF8&amp;tag=jimwebbesblog-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=0596805829">Amazon (US)</a>
<br/>
<a href="http://www.amazon.co.uk/gp/product/0596805829?ie=UTF8&amp;tag=jimwebbesblog-21&amp;linkCode=xm2&amp;camp=1634&amp;creativeASIN=0596805829">Amazon (UK)</a></p>

<p align="center"><img alt="Developing Enterprise Web Services book cover" src="https://images-na.ssl-images-amazon.com/images/I/51ojvewjoHL._SX387_BO1,204,203,200_.jpg" width="160" height="240" /></p>
<p align="center"><a href="http://www.amazon.com/gp/product/B005MZDYRE?ie=UTF8&amp;tag=jimwebbesblog-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=B005MZDYRE">Amazon (US)</a>
<br/>
<a href="http://www.amazon.co.uk/gp/product/0131401602?ie=UTF8&amp;tag=jimwebbesblog-21&amp;linkCode=xm2&amp;camp=1634&amp;creativeASIN=0131401602">Amazon (UK)</a></p>
</div></div>
		</div>
			</div><!-- end of #widgets -->
</div>
</div><!-- end of #wrapper -->

	 
</div><!-- end of #container -->

<div id="footer" class="clearfix" role="contentinfo">
	
	<div id="footer-wrapper">
		
		 <!--   main-->
		
		<div id="content-outer">			
				</div>
		<div id="content-outer">
		<div class="grid col-940">

			<div class="grid col-540">
							</div><!-- end of col-540 -->

			<div class="grid col-380 fit">
				<ul class="social-icons"><li class="twitter-icon"><a href="http://twitter.com/jimwebber"><img src="/archive/contents/ui/theme/core/icons/twitter-icon.png" width="24" height="24" alt="Twitter"></a></li></ul><!-- .social-icons -->			</div><!-- end of col-380 fit -->

		</div><!-- end of col-940 -->
		
		<div class="grid col-300 copyright">
			&copy; 2018<a id="copyright_link" href="/archive/" title="World Wide Webber">
				World Wide Webber			</a>
		</div><!-- end of .copyright -->

		<div class="grid col-300 scroll-top"><!--<a href="#scroll-top" title="scroll to top">&uarr;</a>
		<div id="scroll-to-top"><span class="glyphicon glyphicon-chevron-up"></span></div>--></div>

		<div class="grid col-300 fit powered">
			<a href="http://cyberchimps.com/responsive-theme/" title="Responsive Theme" rel="noindex, nofollow">Responsive Theme</a>
			powered by <a href="http://wordpress.org/" title="WordPress">
				WordPress</a>
		</div><!-- end .powered -->
	</div>
		
	</div><!-- end #footer-wrapper -->

	</div><!-- end #footer -->
<div id="scroll" title="Scroll to Top" style="display: block;">Top<span></span></div>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/responsive-scripts.min.js'></script>
<script type='text/javascript' src='/archive/contents/ui/theme/core/js/jquery.placeholder.min.js'></script>
<script async="async" type='text/javascript' src='/archive/contents/lib/akismet/_inc/form.js'></script>
</body>
</html>
